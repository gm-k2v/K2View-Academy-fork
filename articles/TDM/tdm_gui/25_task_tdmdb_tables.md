# Task - TDM DB Tables

TDM settings are saved in the [TDM PostgreSQL DB](/articles/TDM/tdm_architecture/02_tdm_database.md). 

TDM tasks update the following TDM DB tables:

## TASKS

This table holds all [TDM tasks](14_task_overview.md) defined in  the TDM Portal.

- A new record is created for each task.

- Each task record gets a unique **task_id** sequence, which is the table's PK.

  ### Task General Information

  - **task_title**  - the task name. To prevent creating several active tasks with the same name, the **task_title** column has a **unique index** when the status is **Active**.
  - **task_description** 
  - **task_type** - **Extract** , **Load**, **Generate**, **AI-Generated**, **Training**, **Delete**, or **Reserve**.
  - **be_id** - the task's BE. The be_id can be linked to the **product_logical_units** TDM DB table. 
  - **number_of_entities** - populated by the number of entities in the task.
  - **load_entities** - populated with **true** for Load tasks. Otherwise, populated with **false**.
  - **delete_before_load** - populated with **true** for **Delete** or **Load and Delete** tasks. Otherwise, populated with **false**.
  - **task_created_by**, and **task_last_updated_by** - populated by the name of the user who creates the task. From TDM 9.0 onwards, the user's [Fabric role](/articles/17_fabric_credentials/01_fabric_credentials_overview.md) is concatenated to the user name. This is required in order to identify the task creator's Fabric role when the users are managed and kept by the organizationâ€™s identity provider (IDP), for example: SAML. The task creator's Fabric role needs to be identified in order to decide if a [tester user can execute a task](26_task_execution.md#who-can-execute-a-task-via-the-tdm-portal) created by another tester. 
  - **task_creation_date** and **task_last_updated_date** - populated by the task's creation datetime.
  
  ### Reservation Information
  
  - **reserve_ind** - indicates whether the task has reserved entities on the environment.
  - **reserve retention period fields** - defines the reservation period on the task's entities.
  
  
  


  ### Task Status

  - **task_status**: each task is created in **Active** task_status. Deleted tasks have an **Inactive** task_status and are not physically deleted from this table.
  - **task_execution_status**: 
    - **Active** - the task can be executed.
    - **onHold** - [pause the task](/articles/TDM/tdm_gui/26_task_execution.md#holding-task-execution) and set it to On Hold.
    - **Inactive** - a deleted task.

  ### Requested Entities Columns

These columns are used by the TDM task execution process for [creating the entities list of the root LUs](/articles/TDM/tdm_architecture/03a_task_execution_building_entity_list_on_tasks_LUs.md#root-lus) for each task: 

  - **selection method**: populated based on the task's data type (entities or tables) and the subset selection method. 
  - **clone_ind**: this field is set to **true** if the task needs to [clone an entity](17a_task_target_component_entities.md#generate-clones-for-an-entity).
  - **num_of_entities**: number of provisioned entities.
  - **selection_param_value**: populated when the task selection method is either Entity List, Business Parameters, or Custom Logic selection methods:

  <table width="900pxl">
  <tbody>
  <tr>
  <td width="300pxl">
  <p><strong>Task selection method</strong></p>
  </td>
  <td width="200pxl">
  <p><strong>selection_method field</strong></p>
  </td>
  <td width="400pxl">
  <p><strong>Selection_param_value field</strong></p>
  </td>
  </tr>
  <tr>
  <td width="300pxl">
  <p>Entity List</p>
  </td>
  <td width="200pxl">
  <p>L</p>
  </td>
  <td width="400pxl">
  <p>Populated by the list of entities separated by a comma.</p>
  <p><strong>Examples</strong>:</p>
  <ul>
  <li>1,2,3,4</li>
  <li>66</li>
  </ul>
  </td>
  </tr>
  <tr>
  <td width="300pxl">
  <p>Business Parameters, with or without a random selection</p>
  </td>
  <td width="200pxl">
  <p>P, PR</p>
  </td>
  <td width="400pxl">
  <p>Populated by the SQL WHERE statement, generated by the selected parameters.</p>
  <p><strong>Example</strong>:</p>
  <ul>
  <li>(( 'New York' = ANY("Customer.CITY") ))</li>
  </ul>
  </td>
  </tr>
  <tr>
  <td width="300pxl">
      <p>Custom Logic</p>    
  </td>
  <td>C</td>
  <td>Populated with the name of the selected Broadway flow that runs and gets the entity list for the task execution.</td>    
      </tr>    
  </tbody>
  </table>

 

- **parameters** - populated when the task's subset is based on **Business parameters** selection method.

  ### Data Versioning Columns

  - **version_ind** - populated with **true** in a [Data Snapshot (Version) task](15_data_flux_task.md).
  - **selected_version_task_exe_id** - the task execution id of the selected data snapshot (version) loading a selected data snapshot (version). 

### AI-based Generation Columns

- **selected_subset_task_exe_id** - the task execution of the selected training model (data generator) for the AI-based generation.

  ### Environments Columns

  #### Source Environment

- source_env_name 

- source_environment_id


#### Target Environment

- environment_id

### Task Execution Parameters

#### Scheduling Parameters

- **Scheduler** - set based on the task's [Scheduler](22_task_execution_timing_tab.md):
  - If the Scheduler is not set (the task is execution by request), populated by **immediate**.
  - If the Scheduler is set (a scheduled task), populated by a **crontab** based on the selected scheduling parameters of the task.
- **scheduling_end_date** - populated by the **End Date** if set on scheduled tasks.

#### Extract Tasks - [Retention Period](16_task_test_data_store_component.md#retention-period)

- **retention_period_type** and **retention_period_value**.




#### Other Parameters

- **replace_sequences**
- **sync_mode** - 
  - If the task does not override the sync mode, this column remains empty.
  - If the task overrides the [sync mode]([/articles/TDM/tdm_architecture/04_task_execution_overridden_parameters.md#overriding-the-sync-mode-on-the-task-execution), populated by **FORCE** or **OFF**. 

 

## TASKS_LOGICAL_UNITS

This table holds the LUs list of each task. A separate record is created for each LU.

## TASKS_EXE_PROCESS

-------------------------

This table holds a task's [pre and post execution processes](21_task_pre_and_post_execution_processes.md). A new record is created for each pre or post execution process.

## TASK_GLOBALS

This table holds all [variables that are overridden by the task](23_task_globals_tab.md). A separate record is created for each variable.



## TDM_GENERATE_TASK_FIELD_MAPPINGS

This table is populated with [data generation parameters](14d_task_source_rule_based_generation.md#data-generation-parameters) for Generate tasks.

## TASK_REF_TABLES

This table holds a list of the task's [tables](20_task_provision_tables.md). A separate record is created for each Reference table.

  [![Previous](/articles/images/Previous.png)](20_task_provision_tables.md)[<img align="right" width="60" height="54" src="/articles/images/Next.png">](26_task_execution.md)



